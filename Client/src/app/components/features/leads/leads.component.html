<div class="leads-main-container">
    <div class="leads-main-container-header">
        <div class="leads-main-container-item">
            <h1>Leads</h1>
        </div>
        <div class="leads-main-container-header-nav">
            <button class="create-lead-btn" (click)="leads_action_container = true">New Lead</button>
            <button class="more-lead-btn">
                <fa-icon [icon]="faEllipsisV"></fa-icon>
            </button>
        </div>
    </div>
    <div class="leads-main-container-body">
        <div class="leads-main-container-body-filtering">
            <div class="leads-main-container-body-filtering-container">
                <div class="leads-search">
                    <fa-icon [icon]="faSearch"></fa-icon>
                    <input (input)="onInputChange($event)" type="text" placeholder="Search for leads..." id="leadSearchInput">
                </div>
                <div class="leads-filters">
                    <div class="leads-owners">
                        <button class="leads-owner-btn">
                            <fa-icon [icon]="faUserAlt"></fa-icon>
                            <span>All Employees</span>
                            <fa-icon [icon]="faChevronDown"></fa-icon>
                        </button>
                    </div>
                    <div class="leads-sort">
                        <button class="leads-sort-btn">
                            <fa-icon [icon]="faSort"></fa-icon>
                            <span>By Name</span>
                            <fa-icon [icon]="faChevronDown"></fa-icon>
                        </button>
                    </div>
                    <div class="leads-view">
                        <button class="leads-card-view-btn">
                            <fa-icon [icon]="faTableCells"></fa-icon>
                        </button>
                        <button class="leads-list-view-btn">
                            <fa-icon [icon]="faBars"></fa-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="leads-main-container-body-categories">
            <div class="category active">
                <span>All</span>
                <span class="category-number">{{lead_count}}</span>
            </div>
            <div class="category">
                <span>New</span>
                <span class="category-number">{{lead_status_new_count}}</span>
            </div>
            <div class="category">
                <span>Contacted</span>
                <span class="category-number">{{lead_status_contacted_count}}</span>
            </div>
            <div class="category">
                <span>Qualified</span>
                <span class="category-number">{{lead_status_qualified_count}}</span>
            </div>
            <div class="category">
                <span>Closed-Won</span>
                <span class="category-number">{{lead_status_closed_won_count}}</span>
            </div>
            <div class="category">
                <span>Closed-Lost</span>
                <span class="category-number">{{lead_status_closed_lost_count}}</span>
            </div>
        </div>
        <div class="leads-main-container-body-leads">
            <div class="lead-card" *ngFor="let lead of LEAD">
                <div class="lead-card-container">
                    <div class="lead-card-header">
                        <div class="lead-card-header-left">
                            <div>
                                <img [src]="DefaultPFP" alt="Default profile picture image">
                            </div>
                            <div>
                                <h3>{{lead.title}} {{lead.first_name}} {{lead.last_name}}</h3>
                                <p>{{lead.company}}</p>
                            </div>
                        </div>
                        <div class="lead-card-header-right">
                            <span class="lead-cdate">{{lead.created_at | date: 'longDate'}}</span>
                        </div>
                    </div>
                    <hr />
                    <div class="lead-card-body">
                        <div>
                            <fa-icon [icon]="faPhone"></fa-icon>
                            <span>{{lead.phone_number || 'Not provided'}}</span>
                        </div>
                        <div>
                            <fa-icon [icon]="faEnvelope"></fa-icon>
                            <span>{{lead.email || 'Not provided'}}</span>
                        </div>
                    </div>
                    <div class="lead-card-footer">
                        <span [ngClass]="getLeadStatusClasses(lead.lead_status_id)">{{getLeadStatus(lead.lead_status_id)}}</span>
                        <fa-icon [icon]="faArrowRightToBracket"></fa-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="loading" *ngIf="loading">
        <app-loading></app-loading>
    </div>
</div>
<div class="leads-action" *ngIf="leads_action_container">
    <div class="leads-action-container">
        <div class="leads-action-content">
            <div class="lead-action-row leads-action-header">
                <div>
                <h1>Create new lead</h1>
                </div>
                <div>
                <button class="close-lead-action-btn-1" (click)="leads_action_container = false">
                    <fa-icon [icon]="faXmark"></fa-icon>
                </button>
                </div>
            </div>
            <div class="lead-action-row">
                <div>
                    <h2>Lead information</h2>
                    <p>Enter the information for your newly generated lead.</p>
                </div>
                <div class="lead-action-info">
                    <form class="lead-action-form">
                        <div class="lead-action-form-content">
                            <fieldset>
                                <label for="leadOwner">Lead owner<span class="red">*</span></label>
                                <select disabled name="leadOwner" id="leadOwner">
                                    <option value="">{{username}}</option>
                                </select>
                            </fieldset>
                            <fieldset>
                                <label for="leadSource">Lead source</label>
                                <input type="text" id="leadSource" name="leadSource" placeholder="Enter lead source" maxlength="50" [(ngModel)]="source">
                            </fieldset>
                            <fieldset>
                                <label for="leadPhoto">Photo</label>
                                <input type="file" id="leadPhoto" name="leadPhoto" [(ngModel)]="photo_url">
                            </fieldset>
                            <fieldset>
                                <label for="leadTitle">Title</label>
                                <select name="leadTitle" id="leadTitle" [(ngModel)]="title">
                                    <option value="" disabled selected>--None--</option>
                                    <option value="Mr.">Mr.</option>
                                    <option value="Mrs.">Mrs.</option>
                                    <option value="Ms.">Ms.</option>
                                    <option value="Dr.">Dr.</option>
                                </select>
                            </fieldset>
                            <fieldset>
                                <label for="leadFirstName">First name<span class="red">*</span></label>
                                <input type="text" id="leadFirstName" name="leadFirstName" placeholder="Enter first name" maxlength="50" [(ngModel)]="first_name" required>
                            </fieldset>
                            <fieldset>
                                <label for="leadLastName">Last name<span class="red">*</span></label>
                                <input type="text" id="leadLastName" name="leadLastName" placeholder="Enter last name" maxlength="50" [(ngModel)]="last_name" required>
                            </fieldset>
                            <fieldset>
                                <label for="leadCompany">Company<span class="red">*</span></label>
                                <input type="text" id="leadCompany" name="leadCompany" placeholder="Enter company name" maxlength="50" [(ngModel)]="company" required>
                            </fieldset>
                            <fieldset>
                                <label for="leadStatus">Status<span class="red">*</span></label>
                                <select name="leadStatus" id="leadStatus" [(ngModel)]="lead_status_id" required>
                                    <option value="1">New</option>
                                    <option value="2">Contacted</option>
                                    <option value="3">Qualified</option>
                                    <option value="4">Closed-Won</option>
                                    <option value="5">Closed-Lost</option>
                                </select>
                            </fieldset>
                            <fieldset>
                                <label for="leadPhone">Phone</label>
                                <input type="tel" id="leadPhone" name="leadPhone" placeholder="Enter phone number" maxlength="50" [(ngModel)]="phone_number">
                            </fieldset>
                            <fieldset>
                                <label for="leadEmail">Email</label>
                                <input type="email" id="leadEmail" name="leadEmail" placeholder="Enter email address" maxlength="50" [(ngModel)]="email">
                            </fieldset>  
                        </div>
                        <div class="lead-action-form-nav">
                            <button class="close-lead-action-btn-2" (click)="leads_action_container = false">Cancel</button>
                            <button class="save-lead-action-btn" (click)="createLead()">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>